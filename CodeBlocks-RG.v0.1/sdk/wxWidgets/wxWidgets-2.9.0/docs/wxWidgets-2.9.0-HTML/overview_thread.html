<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: Multithreading Overview</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Fri Sep 4 06:57:20 2009"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Categories</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Reference manual</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_thread">Multithreading Overview </a></h1>Classes: <a class="el" href="classwx_thread.html" title="A thread is basically a path of execution through a program.">wxThread</a>, <a class="el" href="classwx_thread_helper.html" title="The wxThreadHelper class is a mix-in class that manages a single background thread...">wxThreadHelper</a>, <a class="el" href="classwx_mutex.html" title="A mutex object is a synchronization object whose state is set to signaled when it...">wxMutex</a>, <a class="el" href="classwx_critical_section.html" title="A critical section object is used for exactly the same purpose as a wxMutex.">wxCriticalSection</a>, <a class="el" href="classwx_condition.html" title="wxCondition variables correspond to pthread conditions or to Win32 event objects...">wxCondition</a>, <a class="el" href="classwx_semaphore.html" title="wxSemaphore is a counter limiting the number of threads concurrently accessing a...">wxSemaphore</a><h2><a class="anchor" name="overview_thread_intro">
When to use multiple threads</a></h2>
wxWidgets provides a complete set of classes encapsulating objects necessary in multithreaded (MT) programs: the <a class="el" href="classwx_thread.html" title="A thread is basically a path of execution through a program.">wxThread</a> class itself and different synchronization objects: mutexes (see <a class="el" href="classwx_mutex.html" title="A mutex object is a synchronization object whose state is set to signaled when it...">wxMutex</a>) and critical sections (see <a class="el" href="classwx_critical_section.html" title="A critical section object is used for exactly the same purpose as a wxMutex.">wxCriticalSection</a>) with conditions (see <a class="el" href="classwx_condition.html" title="wxCondition variables correspond to pthread conditions or to Win32 event objects...">wxCondition</a>). The thread API in wxWidgets resembles to POSIX1.c threads API (a.k.a. pthreads), although several functions have different names and some features inspired by Win32 thread API are there as well.<p>
These classes hopefully make writing MT programs easier and they also provide some extra error checking (compared to the native - be it Win32 or Posix - thread API), however it is still a non-trivial undertaking especially for large projects. Before starting an MT application (or starting to add MT features to an existing one) it is worth asking oneself if there is no easier and safer way to implement the same functionality. Of course, in some situations threads really make sense (classical example is a server application which launches a new thread for each new client), but in others it might be an overkill. On the other hand, the recent evolution of the computer hardware shows an important trend towards multi-core systems, which are better exploited using multiple threads (e.g. you may want to split a long task among as many threads as many CPU (cores) the system reports; see <a class="el" href="classwx_thread.html#21ccbc2f91bed8d65aeada49a7f8335d" title="Returns the number of system CPUs or -1 if the value is unknown.">wxThread::GetCPUCount</a>).<p>
To implement non-blocking operations <em>without</em> using multiple threads you have two possible implementation choices:<ul>
<li>use <a class="el" href="classwx_idle_event.html" title="This class is used for idle events, which are generated when the system becomes idle...">wxIdleEvent</a> (e.g. to perform a long calculation while updating a progress dialog)</li><li>do everything at once but call <a class="el" href="classwx_window.html#baf28f1a075fd1b10f761a8febe597ec" title="Calling this method immediately repaints the invalidated area of the window and all...">wxWindow::Update()</a> or wxApp::YieldFor(wxEVT_CATEGORY_UI) periodically to update the screen. If instead you choose to use threads in your application, please read also the following sections of this overview.</li></ul>
<h2><a class="anchor" name="overview_thread_notes">
Important notes for multithreaded applications</a></h2>
When writing a multi-threaded application, it is strongly recommended that <b>no secondary threads call GUI functions</b>. The design which uses one GUI thread and several worker threads which communicate with the main one using <b>events</b> is much more robust and will undoubtedly save you countless problems (example: under Win32 a thread can only access GDI objects such as pens, brushes, device contexts created by itself and not by the other threads).<p>
For communication between secondary threads and the main thread, you may use <a class="el" href="classwx_evt_handler.html#cffd03bf407a856166ea71ef0318b59a" title="Queue event for a later processing.">wxEvtHandler::QueueEvent</a> or its short version <a class="el" href="group__group__funcmacro__events.html#ge921d7bd0e52fedbf3f253d2c408bce1" title="Queue an event for processing on the given object.">wxQueueEvent</a>. These functions have a thread-safe implementation so that they can be used as they are for sending events from one thread to another. However there is no built in method to send messages to the worker threads and you will need to use the available synchronization classes to implement the solution which suits your needs yourself. In particular, please note that it is not enough to derive your class from <a class="el" href="classwx_thread.html" title="A thread is basically a path of execution through a program.">wxThread</a> and <a class="el" href="classwx_evt_handler.html" title="A class that can handle events from the windowing system.">wxEvtHandler</a> to send messages to it: in fact, this does not work at all. You're instead encouraged to use <a class="el" href="classwx_thread_helper.html" title="The wxThreadHelper class is a mix-in class that manages a single background thread...">wxThreadHelper</a> as it greatly simplifies the communication and the sharing of resources.<p>
You should also look at the <a class="el" href="classwx_thread.html" title="A thread is basically a path of execution through a program.">wxThread</a> docs for important notes about secondary threads and their deletion.<p>
Last, remember that if <a class="el" href="classwx_event_loop_base.html#fb5ed08160c7e6b1364170af6115af55" title="Works like Yield() with onlyIfNeeded == true, except that it allows the caller to...">wxEventLoopBase::YieldFor()</a> is used directly or indirectly (e.g. through <a class="el" href="classwx_progress_dialog.html" title="This class represents a dialog that shows a short message and a progress bar.">wxProgressDialog</a>) in your code, then you may have both re-entrancy problems and also problems caused by the processing of events out of order. To resolve the last problem <a class="el" href="classwx_thread_event.html" title="This class adds some simple functionalities to wxCommandEvent coinceived for inter-threads...">wxThreadEvent</a> can be used: thanks to its implementation of the <a class="el" href="classwx_thread_event.html#21a87c9ffaa750f3daf05fb628fe9251" title="Returns wxEVT_CATEGORY_THREAD.">wxThreadEvent::GetEventCategory</a> function <a class="el" href="classwx_thread_event.html" title="This class adds some simple functionalities to wxCommandEvent coinceived for inter-threads...">wxThreadEvent</a> classes in fact do not get processed by <a class="el" href="classwx_event_loop_base.html#fb5ed08160c7e6b1364170af6115af55" title="Works like Yield() with onlyIfNeeded == true, except that it allows the caller to...">wxEventLoopBase::YieldFor()</a> unless you specify the <code>wxEVT_CATEGORY_THREAD</code> flag.<p>
See also the <a class="el" href="page_samples.html#page_samples_thread">Thread Sample</a> for a sample showing some simple interactions between the main and secondary threads. </div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Fri Sep 4 06:57:20 2009</tt> by <a href="http://www.doxygen.org">Doxygen</a> 1.5.8</p></td>
    <td valign="middle" align="right"><p>[ <a href="#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
